{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{Button,Navbar,Nav,Image,Container}from'react-bootstrap';import{Link,useNavigate,useLocation}from'react-router-dom';import{useAuth}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Header=()=>{const{user,logout,deleteAccount}=useAuth();const[showDropdown,setShowDropdown]=useState(false);const[expanded,setExpanded]=useState(false);const dropdownRef=useRef(null);const navigate=useNavigate();const location=useLocation();// Function to check if a path is active\nconst isActive=path=>{if(path==='/'){// For home/search page, only match exact path or artist paths\nreturn location.pathname==='/'||location.pathname.startsWith('/artist/');}return location.pathname===path;};// Close dropdown when clicking outside\nuseEffect(()=>{const handleClickOutside=event=>{if(dropdownRef.current&&!dropdownRef.current.contains(event.target)){setShowDropdown(false);}};// Close dropdown when ESC key is pressed\nconst handleEscKey=event=>{if(event.key==='Escape'){setShowDropdown(false);}};document.addEventListener('mousedown',handleClickOutside);document.addEventListener('keydown',handleEscKey);return()=>{document.removeEventListener('mousedown',handleClickOutside);document.removeEventListener('keydown',handleEscKey);};},[]);const handleLogout=async()=>{const result=await logout();if(result.success){navigate('/');setExpanded(false);}};const handleDeleteAccount=async()=>{if(window.confirm('Are you sure you want to delete your account? This action cannot be undone.')){const result=await deleteAccount();if(result.success){navigate('/');setExpanded(false);}}};const handleNavLinkClick=()=>{setExpanded(false);};return/*#__PURE__*/_jsx(Navbar,{bg:\"light\",expand:\"md\",className:\"px-2 py-2\",expanded:expanded,onToggle:setExpanded,children:/*#__PURE__*/_jsxs(Container,{fluid:true,children:[/*#__PURE__*/_jsx(Navbar.Brand,{as:Link,to:\"/\",className:\"text-dark\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"Artist Search\"})}),/*#__PURE__*/_jsx(Navbar.Toggle,{\"aria-controls\":\"basic-navbar-nav\",style:{minWidth:'44px',minHeight:'44px'}}),/*#__PURE__*/_jsx(Navbar.Collapse,{id:\"basic-navbar-nav\",children:/*#__PURE__*/_jsxs(Nav,{className:\"ms-auto\",children:[/*#__PURE__*/_jsx(Nav.Link,{as:Link,to:\"/\",className:`my-2 my-md-0 px-3 py-2 rounded ${isActive('/')?'bg-primary text-white':'text-dark'}`,onClick:handleNavLinkClick,children:\"Search\"}),user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Nav.Link,{as:Link,to:\"/favorites\",className:`my-2 my-md-0 px-3 py-2 rounded ${isActive('/favorites')?'bg-primary text-white':'text-dark'}`,onClick:handleNavLinkClick,children:\"Favorites\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative d-md-block d-flex\",ref:dropdownRef,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center p-2 rounded cursor-pointer my-2 my-md-0\",style:{cursor:'pointer',minHeight:'44px'},onClick:()=>setShowDropdown(!showDropdown),children:[/*#__PURE__*/_jsx(Image,{src:user.profileImageUrl,roundedCircle:true,width:\"30\",height:\"30\",className:\"me-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"me-1\",children:user.fullname}),/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-caret-down-fill\"})]}),showDropdown&&/*#__PURE__*/_jsxs(\"div\",{className:\"position-absolute end-0 mt-2 py-2 bg-white rounded shadow-sm\",style:{width:'200px',zIndex:1000},children:[/*#__PURE__*/_jsx(Button,{variant:\"link\",className:\"dropdown-item text-danger\",onClick:handleDeleteAccount,style:{minHeight:'44px'},children:\"Delete account\"}),/*#__PURE__*/_jsx(Button,{variant:\"link\",className:\"dropdown-item\",onClick:handleLogout,style:{minHeight:'44px'},children:\"Log out\"})]})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Nav.Link,{as:Link,to:\"/login\",className:`my-2 my-md-0 px-3 py-2 rounded ${isActive('/login')?'bg-primary text-white':'text-dark'}`,onClick:handleNavLinkClick,children:\"Log in\"}),/*#__PURE__*/_jsx(Nav.Link,{as:Link,to:\"/register\",className:`my-2 my-md-0 px-3 py-2 rounded ${isActive('/register')?'bg-primary text-white':'text-dark'}`,onClick:handleNavLinkClick,children:\"Register\"})]})]})})]})});};export default Header;","map":{"version":3,"names":["React","useState","useRef","useEffect","Button","Navbar","Nav","Image","Container","Link","useNavigate","useLocation","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Header","user","logout","deleteAccount","showDropdown","setShowDropdown","expanded","setExpanded","dropdownRef","navigate","location","isActive","path","pathname","startsWith","handleClickOutside","event","current","contains","target","handleEscKey","key","document","addEventListener","removeEventListener","handleLogout","result","success","handleDeleteAccount","window","confirm","handleNavLinkClick","bg","expand","className","onToggle","children","fluid","Brand","as","to","Toggle","style","minWidth","minHeight","Collapse","id","onClick","ref","cursor","src","profileImageUrl","roundedCircle","width","height","fullname","zIndex","variant"],"sources":["/Users/praveen/Desktop/USC/CSCI 571 WebTech/learnreact/backup/client/src/components/Header.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { Button, Navbar, Nav, Image, Container } from 'react-bootstrap';\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\n\nconst Header = () => {\n  const { user, logout, deleteAccount } = useAuth();\n  const [showDropdown, setShowDropdown] = useState(false);\n  const [expanded, setExpanded] = useState(false);\n  const dropdownRef = useRef(null);\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  // Function to check if a path is active\n  const isActive = (path) => {\n    if (path === '/') {\n      // For home/search page, only match exact path or artist paths\n      return location.pathname === '/' || location.pathname.startsWith('/artist/');\n    }\n    return location.pathname === path;\n  };\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\n        setShowDropdown(false);\n      }\n    };\n\n    // Close dropdown when ESC key is pressed\n    const handleEscKey = (event) => {\n      if (event.key === 'Escape') {\n        setShowDropdown(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    document.addEventListener('keydown', handleEscKey);\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n      document.removeEventListener('keydown', handleEscKey);\n    };\n  }, []);\n\n  const handleLogout = async () => {\n    const result = await logout();\n    if (result.success) {\n      navigate('/');\n      setExpanded(false);\n    }\n  };\n\n  const handleDeleteAccount = async () => {\n    if (window.confirm('Are you sure you want to delete your account? This action cannot be undone.')) {\n      const result = await deleteAccount();\n      if (result.success) {\n        navigate('/');\n        setExpanded(false);\n      }\n    }\n  };\n\n  const handleNavLinkClick = () => {\n    setExpanded(false);\n  };\n\n  return (\n    <Navbar\n      bg=\"light\"\n      expand=\"md\"\n      className=\"px-2 py-2\"\n      expanded={expanded}\n      onToggle={setExpanded}\n    >\n      <Container fluid>\n        <Navbar.Brand as={Link} to=\"/\" className=\"text-dark\">\n          <h5 className=\"mb-0\">Artist Search</h5>\n        </Navbar.Brand>\n\n        <Navbar.Toggle\n          aria-controls=\"basic-navbar-nav\"\n          style={{ minWidth: '44px', minHeight: '44px' }}\n        />\n\n        <Navbar.Collapse id=\"basic-navbar-nav\">\n          <Nav className=\"ms-auto\">\n            <Nav.Link\n              as={Link}\n              to=\"/\"\n              className={`my-2 my-md-0 px-3 py-2 rounded ${isActive('/') ? 'bg-primary text-white' : 'text-dark'}`}\n              onClick={handleNavLinkClick}\n            >\n              Search\n            </Nav.Link>\n\n            {user ? (\n              <>\n                <Nav.Link\n                  as={Link}\n                  to=\"/favorites\"\n                  className={`my-2 my-md-0 px-3 py-2 rounded ${isActive('/favorites') ? 'bg-primary text-white' : 'text-dark'}`}\n                  onClick={handleNavLinkClick}\n                >\n                  Favorites\n                </Nav.Link>\n\n                <div className=\"position-relative d-md-block d-flex\" ref={dropdownRef}>\n                  <div\n                    className=\"d-flex align-items-center p-2 rounded cursor-pointer my-2 my-md-0\"\n                    style={{ cursor: 'pointer', minHeight: '44px' }}\n                    onClick={() => setShowDropdown(!showDropdown)}\n                  >\n                    <Image\n                      src={user.profileImageUrl}\n                      roundedCircle\n                      width=\"30\"\n                      height=\"30\"\n                      className=\"me-2\"\n                    />\n                    <span className=\"me-1\">{user.fullname}</span>\n                    <i className=\"bi bi-caret-down-fill\"></i>\n                  </div>\n\n                  {showDropdown && (\n                    <div className=\"position-absolute end-0 mt-2 py-2 bg-white rounded shadow-sm\"\n                         style={{ width: '200px', zIndex: 1000 }}>\n                      <Button\n                        variant=\"link\"\n                        className=\"dropdown-item text-danger\"\n                        onClick={handleDeleteAccount}\n                        style={{ minHeight: '44px' }}\n                      >\n                        Delete account\n                      </Button>\n                      <Button\n                        variant=\"link\"\n                        className=\"dropdown-item\"\n                        onClick={handleLogout}\n                        style={{ minHeight: '44px' }}\n                      >\n                        Log out\n                      </Button>\n                    </div>\n                  )}\n                </div>\n              </>\n            ) : (\n              <>\n                <Nav.Link\n                  as={Link}\n                  to=\"/login\"\n                  className={`my-2 my-md-0 px-3 py-2 rounded ${isActive('/login') ? 'bg-primary text-white' : 'text-dark'}`}\n                  onClick={handleNavLinkClick}\n                >\n                  Log in\n                </Nav.Link>\n                <Nav.Link\n                  as={Link}\n                  to=\"/register\"\n                  className={`my-2 my-md-0 px-3 py-2 rounded ${isActive('/register') ? 'bg-primary text-white' : 'text-dark'}`}\n                  onClick={handleNavLinkClick}\n                >\n                  Register\n                </Nav.Link>\n              </>\n            )}\n          </Nav>\n        </Navbar.Collapse>\n      </Container>\n    </Navbar>\n  );\n};\n\nexport default Header;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}